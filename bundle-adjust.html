<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bundle adjustment &mdash; Machine Vision Toolbox 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script>window.MathJax = {"tex": {"macros": {"presup": ["\\,{}^{#1}\\!", 1], "SE": ["\\mathbf{SE}(#1)", 1], "SO": ["\\mathbf{SO}(#1)", 1], "se": ["\\mathbf{se}(#1)", 1], "so": ["\\mathbf{so}(#1)", 1], "vec": ["\\boldsymbol{#1}", 1], "dvec": ["\\dot{\\boldsymbol{#1}}", 1], "hvec": ["\\tilde{\\boldsymbol{#1}}", 1], "ddvec": ["\\ddot{\\boldsymbol{#1}}", 1], "fvec": ["\\presup{#1}\\boldsymbol{#2}", 2], "fdvec": ["\\presup{#1}\\dot{\\boldsymbol{#2}}", 2], "fddvec": ["\\presup{#1}\\ddot{\\boldsymbol{#2}}", 2], "norm": ["\\Vert #1 \\Vert", 1], "mat": ["\\mathbf{#1}", 1], "fmat": ["\\presup{#1}\\mathbf{#2}", 2], "sk": ["\\left[#1\\right]", 1], "skx": ["\\left[#1\\right]_{\\times}", 1], "vex": ["\\vee\\left( #1\\right)", 1], "vexx": ["\\vee_{\\times}\\left( #1\\right)", 1], "q": "\\mathring{q}", "fq": ["\\presup{#1}\\mathring{q}", 1]}}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Bag of words" href="bag-of-words.html" />
    <link rel="prev" title="Image algorithms" href="image-algorithms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Machine Vision Toolbox
            <img src="_static/VisionToolboxLogo_CircBlack.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="high-level.html">Class reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="image_class.html">Image processing and feature extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Image sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel.html">Image kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="support-classes.html">Image feature classes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="image-algorithms.html">Image algorithms</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bundle adjustment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust"><code class="docutils literal notranslate"><span class="pre">BundleAdjust</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scene-graph-classes">Scene graph classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bag-of-words.html">Bag of words</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="point-cloud.html">Point clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera.html">Camera projection models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="low-level.html">Function reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="blocks.html">bdsim blocks</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Machine Vision Toolbox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="high-level.html">Class reference</a> &raquo;</li>
          <li><a href="image-algorithms.html">Image algorithms</a> &raquo;</li>
      <li>Bundle adjustment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/bundle-adjust.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="image-algorithms.html" class="btn btn-neutral float-left" title="Image algorithms" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bag-of-words.html" class="btn btn-neutral float-right" title="Bag of words" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bundle-adjustment">
<h1>Bundle adjustment<a class="headerlink" href="#bundle-adjustment" title="Permalink to this heading"></a></h1>
<p>Simple bundle adjustment class</p>
<dl class="py class">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machinevisiontoolbox.BundleAdjust.</span></span><span class="sig-name descname"><span class="pre">BundleAdjust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust" title="Permalink to this definition"></a></dt>
<dd><dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.nviews">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nviews</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nviews" title="Permalink to this definition"></a></dt>
<dd><p>Number of camera views</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of camera views</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.nlandmarks">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nlandmarks</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nlandmarks" title="Permalink to this definition"></a></dt>
<dd><p>Number of landmarks</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of landmarks</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nstates</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates" title="Permalink to this definition"></a></dt>
<dd><p>Length of state vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of the state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
<p>This includes fixed views and landmarks whose state will not be
updated in the opimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">nvarstate</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.nvarstates">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nvarstates</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nvarstates" title="Permalink to this definition"></a></dt>
<dd><p>Length of variable state vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of the variable state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
<p>This is the length of the subset of the state vector that excludes
fixed views and landmarks. It only includes cameras and landmarks
whose state will be updated in the opimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nstates</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view">
<span class="sig-name descname"><span class="pre">add_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pose</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.add_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="Permalink to this definition"></a></dt>
<dd><p>Add camera view to bundle adjustment problem</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pose</strong> (<a class="reference external" href="https://petercorke.github.io/spatialmath-python/3d_pose_SE3.html#spatialmath.pose3d.SE3" title="(in Spatial Maths package v0.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SE3</span></code></a>,  array_like(7)) – camera pose</p></li>
<li><p><strong>fixed</strong> (<em>bool</em><em>, </em><em>optional</em>) – the camera is fixed, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new camera viewpoint</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.ViewPoint" title="machinevisiontoolbox.BundleAdjust.ViewPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViewPoint</span></code></a></p>
</dd>
</dl>
<p>Creates a camera node and adds it to the bundle adjustment problem.</p>
<p>The camera <code class="docutils literal notranslate"><span class="pre">pose</span></code>  can be <a class="reference external" href="https://petercorke.github.io/spatialmath-python/3d_pose_SE3.html#spatialmath.pose3d.SE3" title="(in Spatial Maths package v0.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SE3</span></code></a> or a vector (1x7)
comprising translation and unit quaternion in vector form.</p>
<p>If the camera is fixed (anchored) it will not be adjusted in the
optimization process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Adds a <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.ViewPoint" title="machinevisiontoolbox.BundleAdjust.ViewPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViewPoint</span></code></a> object as a node in the 
underlying scene graph.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_projection</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark">
<span class="sig-name descname"><span class="pre">add_landmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.add_landmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="Permalink to this definition"></a></dt>
<dd><p>Add 3D landmark point to bundle adjustment problem</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D world point, aka landmark</p></li>
<li><p><strong>fixed</strong> (<em>bool</em><em>, </em><em>optional</em>) – the landmark is fixed, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new landmark</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Landmark" title="machinevisiontoolbox.BundleAdjust.Landmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Landmark</span></code></a> instance</p>
</dd>
</dl>
<p>Create a landmark node and add it to the bundle adjustment problem.</p>
<p>If the landmark is fixed (anchored) it will not be adjusted in the
optimization process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Adds a <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Landmark" title="machinevisiontoolbox.BundleAdjust.Landmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Landmark</span></code></a> object as a node in the 
underlying scene graph.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_projection</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection">
<span class="sig-name descname"><span class="pre">add_projection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">viewpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landmark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.add_projection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection" title="Permalink to this definition"></a></dt>
<dd><p>Add camera observation to bundle adjustment problem</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>view</strong> (<a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.ViewPoint" title="machinevisiontoolbox.BundleAdjust.ViewPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViewPoint</span></code></a>) – camera viewpoint</p></li>
<li><p><strong>landmark</strong> (<a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Landmark" title="machinevisiontoolbox.BundleAdjust.Landmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Landmark</span></code></a>) – landmark point</p></li>
<li><p><strong>uv</strong> (<em>array_like</em><em>(</em><em>2</em><em>)</em>) – image plane coordinate</p></li>
</ul>
</dd>
</dl>
<p>Add an observation by <code class="docutils literal notranslate"><span class="pre">viewpoint</span></code> of a <code class="docutils literal notranslate"><span class="pre">landmark</span></code> to the bundle
adjustment problem.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Adds a <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Observation" title="machinevisiontoolbox.BundleAdjust.Observation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observation</span></code></a> object as an edge in the
underlying scene graph.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.load_SBA">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_SBA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cameraFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imagesize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.load_SBA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.load_SBA" title="Permalink to this definition"></a></dt>
<dd><p>Load bundle adjustment data files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cameraFile</strong> (<em>str</em>) – name of file with camera view data</p></li>
<li><p><strong>pointFile</strong> (<em>str</em>) – name of file with landmark data</p></li>
<li><p><strong>calibFile</strong> (<em>str</em>) – name of file with camera intrinsic data</p></li>
<li><p><strong>imagesize</strong> (<em>array_like</em><em>(</em><em>2</em><em>)</em>) – image plane dimensions in pixels, if not given infer
it from principal point data in <code class="docutils literal notranslate"><span class="pre">calibFile</span></code></p></li>
</ul>
</dd>
</dl>
<p>Provides access to bundle adjustment problems from data files as distributed with the SBA package.
Details of the file format are given in the source code comments.</p>
<p>Example:</p>
<p>To solve the 7-point bundle adjustment problem distributed with
SBA 1.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ba</span> <span class="o">=</span> <span class="n">Bundle</span><span class="o">.</span><span class="n">load_SBA</span><span class="p">(</span><span class="s1">&#39;7cams.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;7pts.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;calib.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Sparse Bundle Adjustment package by Manolis Lourakis,
<a class="reference external" href="http://users.ics.forth.gr/~lourakis/sba">http://users.ics.forth.gr/~lourakis/sba</a></p></li>
</ul>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_projection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_projection</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">animate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lmbda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lmbdamin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-08</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dxmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.optimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.optimize" title="Permalink to this definition"></a></dt>
<dd><p>Perform the bundle adjustment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – state vector, defaults to the state vector in the instance</p></li>
<li><p><strong>animate</strong> (<em>bool</em><em>, </em><em>optional</em>) – graphically animate the updates, defaults to False</p></li>
<li><p><strong>lmbda</strong> (<em>float</em><em>, </em><em>optional</em>) – initial damping term, defaults to 0.1</p></li>
<li><p><strong>lmbdamin</strong> (<em>float</em><em>, </em><em>optional</em>) – minimum value of <code class="docutils literal notranslate"><span class="pre">lmbda</span></code>, defaults to 1e-8</p></li>
<li><p><strong>dxmin</strong> (<em>float</em><em>, </em><em>optional</em>) – terminate optimization if state update norm falls below this 
threshold, defaults to 1e-4</p></li>
<li><p><strong>tol</strong> (<em>float</em><em>, </em><em>optional</em>) – terminate optimization if error total reprojection error
falls below this threshold, defaults to 0.5 pixels</p></li>
<li><p><strong>iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – maximum number of iterations, defaults to 1000</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – show Levenberg-Marquadt status, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>optimized state vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(N)</p>
</dd>
</dl>
<p>Performs a Levenberg-Marquadt style optimization of the bundle
adjustment problem which repeatedly calls <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.solve" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.solve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solve</span></code></a>.  Adjusts
camera poses and landmark positions in order to minimize the total
reprojection error.</p>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Robotics, Vision &amp; Control for Python, Section 14.3.2, 
P. Corke, Springer 2023.</p></li>
</ul>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nstates</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.solve" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.solve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solve</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_linear_system</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lmbda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.solve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solve for state update</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em>) – state vector</p></li>
<li><p><strong>lmbda</strong> (<em>float</em><em>, </em><em>optional</em>) – damping term, defaults to 0.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(\delta \vec{X}\)</span>, update to the variable state vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(M)</p>
</dd>
</dl>
<p>Determines the state update <span class="math notranslate nohighlight">\(\delta \vec{x}\)</span> by creating and
solving the linear equation</p>
<div class="math notranslate nohighlight">
\[\mat{H} \delta \vec{x} = \vec{b}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mat{H}\)</span> is the Hessian and <span class="math notranslate nohighlight">\(\mat{b}\)</span> is the the 
projection error.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The damping term <code class="docutils literal notranslate"><span class="pre">lmbda</span></code> is added to the diagonal of the
Hessian to prevent problems when the Hessian is nearly
singular.</p></li>
<li><p>If the problem includes fixed cameras or landmarks then
<span class="math notranslate nohighlight">\(\mbox{len}(\delta \vec{x}) &lt; \mbox{len}(\vec{x})\)</span>
since fixed elements are omitted from the variable state
vector used for the optimization.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Robotics, Vision &amp; Control for Python, Section 14.3.2, F.2.4, 
P. Corke, Springer 2023.</p></li>
</ul>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_linear_system</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system">
<span class="sig-name descname"><span class="pre">build_linear_system</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.build_linear_system"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system" title="Permalink to this definition"></a></dt>
<dd><p>Build the linear system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em>) – state vector</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Hessian <span class="math notranslate nohighlight">\(\mat{H}(\vec{x})\)</span> and projection error <span class="math notranslate nohighlight">\(\vec{b}\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sparse_array(N,N), sparse_ndarray(N,1), float</p>
</dd>
</dl>
<p>Build the block structured Hessian matrix based on current bundle
adjustment state and the Jacobians.</p>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Robotics, Vision &amp; Control for Python, Section 14.3.2, F.2.4, 
P. Corke, Springer 2023.</p></li>
</ul>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">spy</span></code> <code class="xref py py-meth docutils literal notranslate"><span class="pre">derivatives</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.spyH">
<span class="sig-name descname"><span class="pre">spyH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.spyH"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.spyH" title="Permalink to this definition"></a></dt>
<dd><p>Display sparsity of Hessian</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em>) – state vector</p>
</dd>
</dl>
<p>Use Matplotlib to display the zero and non-zero elements of the
Hessian.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.build_linear_system"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_linear_system</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.getstate">
<span class="sig-name descname"><span class="pre">getstate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.getstate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.getstate" title="Permalink to this definition"></a></dt>
<dd><p>Get the state vector</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>state  vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray(N)</p>
</dd>
</dl>
<p>Build the state vector by concatenating the pose of all cameras and
then the position of all landmarks.  That information is provided at
problem initialization by calls to <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a> and
<a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setstate</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nstates</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_view</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.add_landmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_landmark</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate">
<span class="sig-name descname"><span class="pre">setstate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.setstate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate" title="Permalink to this definition"></a></dt>
<dd><p>Update camera and landmark state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em>) – new state vector</p>
</dd>
</dl>
<p>Copy new state data into the nodes of the bundle adjustment graph.
Those nodes corresponding to fixed cameras or landmarks are
unchanged.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.updatestate" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.updatestate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">updatestate</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.getstate" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.getstate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getstate</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.updatestate">
<span class="sig-name descname"><span class="pre">updatestate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.updatestate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.updatestate" title="Permalink to this definition"></a></dt>
<dd><p>Update the state vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em>) – state vector</p></li>
<li><p><strong>dx</strong> (<em>ndarray</em><em>(</em><em>M</em><em>)</em>) – variable state update vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated state vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(N)</p>
</dd>
</dl>
<p>The elements of the update to the variable state are inserted into
the state vector.  Those elements corresponding to fixed cameras or
landmarks are unchanged.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.setstate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setstate</span></code></a> <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.nstates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nstates</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.errors">
<span class="sig-name descname"><span class="pre">errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.errors" title="Permalink to this definition"></a></dt>
<dd><p>Total reprojection error</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em><em>, </em><em>optional</em>) – state vector, defaults to state vector in instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>total residual</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p>Compute the total reprojection error, of all projected landmarks
on all camera viewpoints. Is ideally zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.getresidual" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.getresidual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getresidual</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.getresidual">
<span class="sig-name descname"><span class="pre">getresidual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.getresidual"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.getresidual" title="Permalink to this definition"></a></dt>
<dd><p>Get error residuals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>ndarray</em><em>(</em><em>N</em><em>)</em><em>, </em><em>optional</em>) – state vector, defaults to state vector in instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>residuals <span class="math notranslate nohighlight">\(\mat{R}\)</span> for each observation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(V,L)</p>
</dd>
</dl>
<p>Returns a 2D array <span class="math notranslate nohighlight">\(\mat{R}\)</span> whose elements <span class="math notranslate nohighlight">\(r_{ij}\)</span>
represent the Euclidean reprojection error for camera <span class="math notranslate nohighlight">\(i\)</span>
observing landmark <span class="math notranslate nohighlight">\(j\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.errors" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.errors"><code class="xref py py-meth docutils literal notranslate"><span class="pre">errors</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.graph">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">graph</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.graph" title="Permalink to this definition"></a></dt>
<dd><p>Get the scene graph</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>scene graph</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">PGraph</span></code></p>
</dd>
</dl>
<p>The scene graph has nodes representing camera viewpoints, of type
<a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.ViewPoint" title="machinevisiontoolbox.BundleAdjust.ViewPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViewPoint</span></code></a>, and nodes representing landmarks, of type
<a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Landmark" title="machinevisiontoolbox.BundleAdjust.Landmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Landmark</span></code></a>. An edge, of type <a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.Observation" title="machinevisiontoolbox.BundleAdjust.Observation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observation</span></code></a>, exists
between a landmark and the viewpoint that observed, and the edge has
the associated image plane projection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.BundleAdjust.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#BundleAdjust.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.plot" title="Permalink to this definition"></a></dt>
<dd><p>Plot the scene graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>camera</strong> (<em>dict</em><em>, </em><em>optional</em>) – options passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">CentralCamera.plot</span></code>, defaults to {}</p></li>
<li><p><strong>ax</strong> (<em>Axes</em><em>, </em><em>optional</em>) – axis to plot into, defaults to None</p></li>
<li><p><strong>kwargs</strong> – options passed to <code class="xref py py-obj docutils literal notranslate"><span class="pre">PGraph.plot</span></code></p></li>
</ul>
</dd>
</dl>
<p>Display the nodes and edges of the scene graph as an embedded graph.
Overlay camera icons to indicate the camera viewpoint nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#machinevisiontoolbox.BundleAdjust.BundleAdjust.graph" title="machinevisiontoolbox.BundleAdjust.BundleAdjust.graph"><code class="xref py py-meth docutils literal notranslate"><span class="pre">graph</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="scene-graph-classes">
<h2>Scene graph classes<a class="headerlink" href="#scene-graph-classes" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machinevisiontoolbox.BundleAdjust.</span></span><span class="sig-name descname"><span class="pre">ViewPoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#ViewPoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint" title="Permalink to this definition"></a></dt>
<dd><dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.pose">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pose</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.pose" title="Permalink to this definition"></a></dt>
<dd><p>Get pose of camera</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pose as an SE(3)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://petercorke.github.io/spatialmath-python/3d_pose_SE3.html#spatialmath.pose3d.SE3" title="(in Spatial Maths package v0.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SE3</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.connect" title="Permalink to this definition"></a></dt>
<dd><p>Connect two vertices with an edge</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest</strong> (<code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass) – The node to connect to</p></li>
<li><p><strong>edge</strong> (<code class="docutils literal notranslate"><span class="pre">Edge</span></code> subclass, optional) – Use this as the edge object, otherwise a new <code class="docutils literal notranslate"><span class="pre">Edge</span></code>
object is created, defaults to None</p></li>
<li><p><strong>cost</strong> (<em>float</em><em>, </em><em>optional</em>) – the cost to traverse this edge, required for planning 
methods, defaults to None</p></li>
<li><p><strong>edgedata</strong> (<em>Any</em><em>, </em><em>optional</em>) – reference to arbitrary data associated with the edge,
defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – vertex types are different subclasses</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the edge connecting the nodes</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Edge</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">v1.connect(v2)</span></code> connects vertex <code class="docutils literal notranslate"><span class="pre">v1</span></code> to vertex <code class="docutils literal notranslate"><span class="pre">v2</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the vertices subclass <code class="docutils literal notranslate"><span class="pre">UVertex</span></code> the edge is undirected, and if
they subclass <code class="docutils literal notranslate"><span class="pre">DVertex</span></code> the edge is directed.</p></li>
<li><p>Vertices must both be of the same <code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.edges">
<span class="sig-name descname"><span class="pre">edges</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.edges" title="Permalink to this definition"></a></dt>
<dd><p>All outgoing edges of vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all edges leaving this node</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of Edge</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For a directed graph the edges are those leaving this vertex</p></li>
<li><dl class="simple">
<dt>For a non-directed graph the edges are those leaving or entering</dt><dd><p>this vertex</p>
</dd>
</dl>
</li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.edgeto">
<span class="sig-name descname"><span class="pre">edgeto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.edgeto" title="Permalink to this definition"></a></dt>
<dd><p>Edge connecting vertex to specific neighbour</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dest</strong> (<code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass) – a neigbouring node</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a neighbour</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the edge from this node to <code class="docutils literal notranslate"><span class="pre">dest</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Edge</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For a directed graph <code class="docutils literal notranslate"><span class="pre">dest</span></code> must be at the arrow end of the edge</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.incidences">
<span class="sig-name descname"><span class="pre">incidences</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.incidences" title="Permalink to this definition"></a></dt>
<dd><p>Neighbours and edges of a vertex</p>
<p><code class="docutils literal notranslate"><span class="pre">v.incidences()</span></code> is a generator that returns a list of incidences, 
tuples of (vertex, edge) for all neighbours of the vertex <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.index">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.index" title="Permalink to this definition"></a></dt>
<dd><p>Index into the state vector (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the index of the start of this object’s state in the state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.index2">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index2</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.index2" title="Permalink to this definition"></a></dt>
<dd><p>Index into the variable state vector (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the index of the start of this object’s state in the variable state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.isfixed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">isfixed</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.isfixed" title="Permalink to this definition"></a></dt>
<dd><p>Value is fixed (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Quantity is fixed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p>This viewpoint or landmark will not be adjusted during optimization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.neighbours">
<span class="sig-name descname"><span class="pre">neighbours</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.neighbours" title="Permalink to this definition"></a></dt>
<dd><p>Neighbours of a vertex</p>
<p><code class="docutils literal notranslate"><span class="pre">v.neighbours()</span></code> is a list of neighbour of the vertex object <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.x">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.x" title="Permalink to this definition"></a></dt>
<dd><p>The x-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The x-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.y">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">y</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.y" title="Permalink to this definition"></a></dt>
<dd><p>The y-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The y-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.ViewPoint.z">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">z</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.ViewPoint.z" title="Permalink to this definition"></a></dt>
<dd><p>The z-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The z-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machinevisiontoolbox.BundleAdjust.</span></span><span class="sig-name descname"><span class="pre">Landmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#Landmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark" title="Permalink to this definition"></a></dt>
<dd><dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.P">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">P</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.P" title="Permalink to this definition"></a></dt>
<dd><p>Get landmark position</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>landmark position in 3D</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray(3)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.connect" title="Permalink to this definition"></a></dt>
<dd><p>Connect two vertices with an edge</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dest</strong> (<code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass) – The node to connect to</p></li>
<li><p><strong>edge</strong> (<code class="docutils literal notranslate"><span class="pre">Edge</span></code> subclass, optional) – Use this as the edge object, otherwise a new <code class="docutils literal notranslate"><span class="pre">Edge</span></code>
object is created, defaults to None</p></li>
<li><p><strong>cost</strong> (<em>float</em><em>, </em><em>optional</em>) – the cost to traverse this edge, required for planning 
methods, defaults to None</p></li>
<li><p><strong>edgedata</strong> (<em>Any</em><em>, </em><em>optional</em>) – reference to arbitrary data associated with the edge,
defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – vertex types are different subclasses</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the edge connecting the nodes</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Edge</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">v1.connect(v2)</span></code> connects vertex <code class="docutils literal notranslate"><span class="pre">v1</span></code> to vertex <code class="docutils literal notranslate"><span class="pre">v2</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the vertices subclass <code class="docutils literal notranslate"><span class="pre">UVertex</span></code> the edge is undirected, and if
they subclass <code class="docutils literal notranslate"><span class="pre">DVertex</span></code> the edge is directed.</p></li>
<li><p>Vertices must both be of the same <code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.edges">
<span class="sig-name descname"><span class="pre">edges</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.edges" title="Permalink to this definition"></a></dt>
<dd><p>All outgoing edges of vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of all edges leaving this node</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of Edge</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For a directed graph the edges are those leaving this vertex</p></li>
<li><dl class="simple">
<dt>For a non-directed graph the edges are those leaving or entering</dt><dd><p>this vertex</p>
</dd>
</dl>
</li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.edgeto">
<span class="sig-name descname"><span class="pre">edgeto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.edgeto" title="Permalink to this definition"></a></dt>
<dd><p>Edge connecting vertex to specific neighbour</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dest</strong> (<code class="docutils literal notranslate"><span class="pre">Vertex</span></code> subclass) – a neigbouring node</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a neighbour</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the edge from this node to <code class="docutils literal notranslate"><span class="pre">dest</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Edge</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For a directed graph <code class="docutils literal notranslate"><span class="pre">dest</span></code> must be at the arrow end of the edge</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.incidences">
<span class="sig-name descname"><span class="pre">incidences</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.incidences" title="Permalink to this definition"></a></dt>
<dd><p>Neighbours and edges of a vertex</p>
<p><code class="docutils literal notranslate"><span class="pre">v.incidences()</span></code> is a generator that returns a list of incidences, 
tuples of (vertex, edge) for all neighbours of the vertex <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.index">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.index" title="Permalink to this definition"></a></dt>
<dd><p>Index into the state vector (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the index of the start of this object’s state in the state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.index2">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index2</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.index2" title="Permalink to this definition"></a></dt>
<dd><p>Index into the variable state vector (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the index of the start of this object’s state in the variable state vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.isfixed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">isfixed</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.isfixed" title="Permalink to this definition"></a></dt>
<dd><p>Value is fixed (base method)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Quantity is fixed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p>This viewpoint or landmark will not be adjusted during optimization.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.neighbours">
<span class="sig-name descname"><span class="pre">neighbours</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.neighbours" title="Permalink to this definition"></a></dt>
<dd><p>Neighbours of a vertex</p>
<p><code class="docutils literal notranslate"><span class="pre">v.neighbours()</span></code> is a list of neighbour of the vertex object <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.x">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.x" title="Permalink to this definition"></a></dt>
<dd><p>The x-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The x-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.y">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">y</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.y" title="Permalink to this definition"></a></dt>
<dd><p>The y-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The y-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Landmark.z">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">z</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Landmark.z" title="Permalink to this definition"></a></dt>
<dd><p>The z-coordinate of an embedded vertex</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The z-coordinate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Observation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machinevisiontoolbox.BundleAdjust.</span></span><span class="sig-name descname"><span class="pre">Observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camera</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landmark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uv</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/machinevisiontoolbox/BundleAdjust.html#Observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Observation" title="Permalink to this definition"></a></dt>
<dd><dl class="py property">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Observation.p">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">p</span></span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Observation.p" title="Permalink to this definition"></a></dt>
<dd><p>Get image plane projection</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>observed projection of landmark on image plane</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ndarray(2)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Observation.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vertex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Observation.next" title="Permalink to this definition"></a></dt>
<dd><p>Return other end of an edge</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vertex</strong> (<em>Vertex subclass</em>) – one vertex on the edge</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – <code class="docutils literal notranslate"><span class="pre">vertex</span></code> is not on the edge</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the other vertex on the edge</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Vertex subclass</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">e.next(v1)</span></code> is the vertex at the other end of edge <code class="docutils literal notranslate"><span class="pre">e</span></code>, ie. the 
vertex that is not <code class="docutils literal notranslate"><span class="pre">v1</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machinevisiontoolbox.BundleAdjust.Observation.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machinevisiontoolbox.BundleAdjust.Observation.remove" title="Permalink to this definition"></a></dt>
<dd><p>Remove edge from graph</p>
<p><code class="docutils literal notranslate"><span class="pre">e.remove()</span></code> removes <code class="docutils literal notranslate"><span class="pre">e</span></code> from the graph, but does not delete the
edge object.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="image-algorithms.html" class="btn btn-neutral float-left" title="Image algorithms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bag-of-words.html" class="btn btn-neutral float-right" title="Bag of words" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-, Peter Corke.
      <span class="lastupdated">Last updated on 09-Oct-2022.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>